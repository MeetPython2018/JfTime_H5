{"remainingRequest":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\src\\components\\wenzhao.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\src\\components\\wenzhao.vue","mtime":1586757974861},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  export default {\n    name: \"wenzhao\",\n    data(){\n            return {\n                btnStyle:'el-icon-video-play',\n                visible: false,\n                active: '',\n                id:'',\n                index:0,\n                play:0,\n                audio_menu:'',\n                flag: false,\n                demo: '',\n                fits:'fill',\n                data_len: this.dataLength,\n                demo_data_len:'',\n                data: '',\n                page_data:'',\n                title:'',\n                title_son:'',\n                offset:0,\n              dialogVisible: false,\n        count: 0,\n        loading: false\n            };\n        },\n    methods:{\n      //  上下翻页\n      handleCurrentChange(val){\n        var offset = (val-1)*10\n        fetch(\"/ajax/wz/handleCurrentChange?offset=\"+offset).then(function (e) {\n          return e.json()\n        }).then((e)=>{\n          this.data = e\n        })\n      },\n      // 音频控件\n      playAudio(audio_src,audio_name,creator,index){\n        let demo = this.$store.state.playAudio(audio_src,audio_name,creator,index)\n        this.$emit('load_audio',demo)\n      },\n      message(el){\n        fetch(\"/ajax/get_sessions\").then(function (e) {\n          return e.json()\n        }).then((e)=>{\n          console.log(e)\n          if(e.sessions==='ok'){\n            var author= el\n            this.$prompt('To the:'+author,'评论' ,{\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              inputType:'textarea',\n              showClose:true,\n              inputPattern: /^.{1,100}$/,\n              inputErrorMessage: '评论不能为空，或超出一百字'\n            }).then(({ value }) => {\n              var time_stamp = (new Date()).valueOf()\n              var user = store.state.username\n              this.$axios({\n                method:'post',\n                url:'/ajax/comment',\n                headers:{\n                  'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                data:this.qs.stringify({\n                  user:user,\n                  comment:value,\n                  time_stamp:time_stamp,\n                  audio_id:author\n                })\n              }).then((res)=>{\n                if(res.data.status==='success'){\n                  this.$message({\n                    type: 'success',\n                    message: '评论成功！'\n                  });\n                }else {\n                  this.$message({\n                    type: 'waring',\n                    message: '评论失败！'\n                  });\n                }\n              })\n            }).catch(() => {\n              this.$message({\n                type: 'info',\n                message: '取消评论！'\n              });\n            });\n          }\n          else{\n            this.$message({\n              type: 'waring',\n              message: '请先登录！'\n            });\n          }\n        })\n      },\n      seeMessages(val){\n        this.$axios.get('/ajax/seeMessages',{params:{\n            audio_id:val\n          }\n        }).then((res)=>{\n          if(res.data.length===0){\n            this.count=0\n            this.loading = false\n          }else{\n            this.count = res.data\n            this.loading = false\n          }\n          this.dialogVisible = true\n        })\n      },\n      like(){\n        this.$message({\n          message: '收藏节目成功！',\n          type: 'success'\n        });\n      },\n      load () {\n        this.loading = false\n        setTimeout(() => {\n          // this.count += 2\n          this.loading = false\n        }, 2000)\n      },\n      viweImg(){\n\t      document.body.style = \"\";\n      }\n    },\n    computed:{\n      noMore () {\n        return this.count >= 10\n      },\n      disabled () {\n        return this.loading || this.noMore\n      }\n    },\n    mounted() {\n      fetch(\"/ajax/wz/dataAudio\").then(function (e) {\n                return e.json()\n            }).then((e)=>{\n        this.data = e\n      }),\n        fetch(\"/ajax/wz/dataLength\").then(function (e) {\n          return e.json()\n        }).then((e)=>{\n          this.title = '『文昭談古論今』'\n          this.title_son = '华语世界最受欢迎的评论节目之一'\n          this.data_len = e['data_len']\n        })\n    }\n  }\n",{"version":3,"sources":["wenzhao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wenzhao.vue","sourceRoot":"src/components","sourcesContent":["/* eslint-disable*/\r\n<template>\r\n  <div id=\"wenzhao\">\r\n    <div class=\"container-full\">\r\n      <el-container>\r\n        <div id=\"center\">\r\n          <el-main>\r\n            <ul class=\"jf_audio\">\r\n              <div class=\"divider col-md-12 col-xs-8\">\r\n                <h4>\r\n                  <span>{{title}}</span>\r\n                </h4>\r\n                <h5>{{title_son}}</h5>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div class=\"jiemu row\">\r\n                  <div class=\"col-xs-6 col-lg-2\" v-for=\"todo in data\" :key=\"todo.id\">\r\n                    <el-image :src=\"todo.cover_src\" @click=\"viweImg\">\r\n                      <div slot=\"placeholder\" class=\"image-slot\">加载中<span class=\"dot\">...</span>\r\n                      </div>\r\n                    </el-image>\r\n                    <h4 class=\"title\">\r\n                                            {{todo.title}}\r\n                                        </h4>\r\n                    <li class=\"audioInfos\">\r\n                      <span>{{todo.upload_date}}</span>\r\n                      <span>{{todo.audio_time}}</span>\r\n                    </li>\r\n                    <li class=\"tools\">\r\n                      <i class=\"iconfont icon-liuyan\" @click=\"message(todo.audio_name)\"></i>\r\n                      <i class=\"iconfont icon-Dialogue\" @click=\"seeMessages(todo.audio_name)\"></i>\r\n                      <i class=\"iconfont icon-xihuan\" @click=\"like\"></i>\r\n                      <i :class=\"index===todo.id ? 'el-icon-video-pause':btnStyle\" @click=\"playAudio(todo.audio_src,todo.audio_name,todo.creator,todo.id)\"></i>\r\n                    </li>\r\n                  </div>\r\n                </div>\r\n                <!--分页-->\r\n                <div class=\"block\">\r\n                  <el-pagination layout=\"prev, pager, next\" :page-size=\"10\" :total=\"data_len\" @current-change=\"handleCurrentChange\">\r\n                  </el-pagination>\r\n                </div>\r\n                <!--隐藏的评论页-->\r\n                <el-dialog title=\"过往留言\" :visible.sync=\"dialogVisible\">\r\n                  <div class=\"infinite-list-wrapper\" style=\"overflow:auto;height: 18rem\">\r\n                    <ul class=\"list\" v-infinite-scroll=\"load\" infinite-scroll-disabled=\"disabled\">\r\n                      <li v-for=\"i in count\" class=\"list-item\">\r\n                        <div>\r\n                                                  <span><i class=\"iconfont icon-user-outline\"></i> {{i.users}} <i class=\"iconfont icon-zhifeiji\"></i> {{i.audio}}</span>\r\n                                                  <span> <i class=\"iconfont icon-riqi\"></i> {{new Date(parseInt(i.comment_time)).toLocaleString().replace(/:\\d{1,2}$/,' ')}}</span>\r\n                                              </div>\r\n                        <p>\r\n                                                  <i class=\"iconfont icon-huihua\"></i> {{i.content}}\r\n                                              </p>\r\n                      </li>\r\n                    </ul>\r\n                    <p v-if=\"loading\">加载中...</p>\r\n                    <p v-if=\"noMore\">没有更多了</p>\r\n                  </div>\r\n                </el-dialog>\r\n              </div>\r\n            </ul>\r\n          </el-main>\r\n        </div>\r\n      </el-container>\r\n    </div>\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  * {\r\n      padding: 0;\r\n      margin: 0;\r\n      font-family: Helvetica,\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"微软雅黑\",Arial,sans-serif;\r\n  }\r\n  #wenzhao{\r\n      width: 100%;\r\n      font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n      -webkit-font-smoothing: antialiased;\r\n      -moz-osx-font-smoothing: grayscale;\r\n      text-align: center;\r\n      padding: 0;\r\n      margin: 0;\r\n      background: #f7f7f7;\r\n  }\r\n  .el-container{\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n  }\r\n  /*音频卡片样式*/\r\n  #center{\r\n      width: 100%;\r\n      background: #f5f5f5!important;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      height: auto;\r\n  }\r\n  .el-main{\r\n      width: 100%!important;\r\n      max-width: 1260px!important;\r\n      margin: 0 auto;\r\n      padding: 0 1.5rem;\r\n  }\r\n  /*播放按钮*/\r\n  .audio_menu{\r\n      position: fixed;\r\n      height: 3.5rem;\r\n      left: 0;\r\n      right: 0;\r\n      top: 0;\r\n      margin: 0 auto;\r\n      width: 15rem;\r\n      border: 0!important;\r\n      z-index: 1200;\r\n  }\r\n  .jf_audio{\r\n      width: 100%;\r\n      list-style: none;\r\n      margin: 1rem 0;\r\n  }\r\n  .jf_audio .el-divider i{\r\n      margin-left: .5rem;\r\n  }\r\n  .jf_audio .item{\r\n      width: 100%;\r\n      height: auto;\r\n      position: relative;\r\n  }\r\n  .jf_audio .item h3{\r\n      height: 3rem;\r\n      margin: 0;\r\n      text-align: left;\r\n      line-height: 3rem;\r\n  }\r\n  .jf_audio .item .jiemu{\r\n      height: auto;\r\n      margin: 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n  }\r\n  .jf_audio .item .jiemu .col-lg-2{\r\n      margin-bottom: 1rem;\r\n      margin-right: .5rem;\r\n      display: flex;\r\n      flex-basis: 10rem;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0!important;\r\n  }\r\n  .jf_audio .item .jiemu div{\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      position: relative;\r\n      transition: all .5s;\r\n      background: #fff;\r\n  }\r\n  .jf_audio .item .jiemu div:hover{\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1)\r\n  }\r\n  .jf_audio  .item .jiemu div .el-image{\r\n      width: 10rem;\r\n      height: 6rem;\r\n      padding: .5rem!important;\r\n  }\r\n  .title{\r\n      width: 100%;\r\n      height: 3rem;\r\n      text-align: justify;\r\n      font-size: .64rem;\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      -webkit-line-clamp: 3;\r\n      line-height: 1rem;\r\n      overflow: hidden;\r\n      padding: 0 .5rem!important;\r\n  }\r\n  .audioInfos{\r\n      width: 100%;\r\n      height: 1.5rem;\r\n      display: flex!important;\r\n      justify-content: space-between!important;\r\n      flex-direction: row!important;\r\n      align-items: center!important;\r\n      padding: .25rem .5rem;\r\n  }\r\n  .audioInfos span{\r\n      font-size: .64rem;\r\n      margin: 0;\r\n      font-family: 楷体;\r\n  }\r\n  .tools{\r\n      width: 100%;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0 .5rem;\r\n      margin-bottom: .25rem;\r\n  }\r\n  .tools i{\r\n      font-size: 1.1rem;\r\n  }\r\n  .icon-Dialogue{\r\n      color: #32DD90;\r\n  }\r\n  .icon-xihuan{\r\n      color: #DD4F43;\r\n  }\r\n  @media screen and (max-width: 600px) { /*当屏幕尺寸小于600px时，应用下面的CSS样式*/\r\n    .col-xs-6{\r\n        width: 45%!important;\r\n    }\r\n      .jf_audio .item .jiemu .col-lg-2{\r\n      margin-bottom: 1rem;\r\n      margin-right: 0!important;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0!important;\r\n      }\r\n  }\r\n  .col-xs-6 .el-image{\r\n      width: 100%!important;\r\n      height: 100%;\r\n  }\r\n  .col-xs-6 .title{\r\n      height: 3.8rem;\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      -webkit-line-clamp: 3;\r\n      line-height: 1.3rem;\r\n      overflow: hidden;\r\n  }\r\n  /*分页样式*/\r\n  .el-pagination{\r\n      width: 100%;\r\n      height: 50px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: flex-start;\r\n  }\r\n  .el-pager{\r\n      background: #fff;\r\n  }\r\n  .el-pagination li{\r\n      margin: 0!important;\r\n  }\r\n  /*分割线*/\r\n  .divider{\r\n      height: auto;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n      font-size: 1.1rem;\r\n      color: #ffcc00;\r\n      padding: .64rem 0;\r\n  }\r\n  .divider h4{\r\n      font-size: 1.1rem;\r\n      margin-bottom: .32rem;\r\n  }\r\n  .divider h4 em{\r\n      font-style: normal;\r\n      margin-right: .5rem;\r\n  }\r\n  .divider h5{\r\n      font-size: .64rem;\r\n      margin-right: .5rem;\r\n  }\r\n  /*节目卡片浮起特效*/\r\n  .active{\r\n      box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.1)!important\r\n  }\r\n  .el-image{\r\n      padding: 0!important;\r\n      box-shadow: none!important;\r\n  }\r\n  .el-icon-video-play,.el-icon-video-pause{\r\n      font-size: 1.6em;\r\n      color: #ffcc00;\r\n      opacity: .6;\r\n  }\r\n</style>\r\n<script>\r\n  export default {\r\n    name: \"wenzhao\",\r\n    data(){\r\n            return {\r\n                btnStyle:'el-icon-video-play',\r\n                visible: false,\r\n                active: '',\r\n                id:'',\r\n                index:0,\r\n                play:0,\r\n                audio_menu:'',\r\n                flag: false,\r\n                demo: '',\r\n                fits:'fill',\r\n                data_len: this.dataLength,\r\n                demo_data_len:'',\r\n                data: '',\r\n                page_data:'',\r\n                title:'',\r\n                title_son:'',\r\n                offset:0,\r\n              dialogVisible: false,\r\n        count: 0,\r\n        loading: false\r\n            };\r\n        },\r\n    methods:{\r\n      //  上下翻页\r\n      handleCurrentChange(val){\r\n        var offset = (val-1)*10\r\n        fetch(\"/ajax/wz/handleCurrentChange?offset=\"+offset).then(function (e) {\r\n          return e.json()\r\n        }).then((e)=>{\r\n          this.data = e\r\n        })\r\n      },\r\n      // 音频控件\r\n      playAudio(audio_src,audio_name,creator,index){\r\n        let demo = this.$store.state.playAudio(audio_src,audio_name,creator,index)\r\n        this.$emit('load_audio',demo)\r\n      },\r\n      message(el){\r\n        fetch(\"/ajax/get_sessions\").then(function (e) {\r\n          return e.json()\r\n        }).then((e)=>{\r\n          console.log(e)\r\n          if(e.sessions==='ok'){\r\n            var author= el\r\n            this.$prompt('To the:'+author,'评论' ,{\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              inputType:'textarea',\r\n              showClose:true,\r\n              inputPattern: /^.{1,100}$/,\r\n              inputErrorMessage: '评论不能为空，或超出一百字'\r\n            }).then(({ value }) => {\r\n              var time_stamp = (new Date()).valueOf()\r\n              var user = store.state.username\r\n              this.$axios({\r\n                method:'post',\r\n                url:'/ajax/comment',\r\n                headers:{\r\n                  'Content-Type': 'application/x-www-form-urlencoded',\r\n                },\r\n                data:this.qs.stringify({\r\n                  user:user,\r\n                  comment:value,\r\n                  time_stamp:time_stamp,\r\n                  audio_id:author\r\n                })\r\n              }).then((res)=>{\r\n                if(res.data.status==='success'){\r\n                  this.$message({\r\n                    type: 'success',\r\n                    message: '评论成功！'\r\n                  });\r\n                }else {\r\n                  this.$message({\r\n                    type: 'waring',\r\n                    message: '评论失败！'\r\n                  });\r\n                }\r\n              })\r\n            }).catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '取消评论！'\r\n              });\r\n            });\r\n          }\r\n          else{\r\n            this.$message({\r\n              type: 'waring',\r\n              message: '请先登录！'\r\n            });\r\n          }\r\n        })\r\n      },\r\n      seeMessages(val){\r\n        this.$axios.get('/ajax/seeMessages',{params:{\r\n            audio_id:val\r\n          }\r\n        }).then((res)=>{\r\n          if(res.data.length===0){\r\n            this.count=0\r\n            this.loading = false\r\n          }else{\r\n            this.count = res.data\r\n            this.loading = false\r\n          }\r\n          this.dialogVisible = true\r\n        })\r\n      },\r\n      like(){\r\n        this.$message({\r\n          message: '收藏节目成功！',\r\n          type: 'success'\r\n        });\r\n      },\r\n      load () {\r\n        this.loading = false\r\n        setTimeout(() => {\r\n          // this.count += 2\r\n          this.loading = false\r\n        }, 2000)\r\n      },\r\n      viweImg(){\r\n\t      document.body.style = \"\";\r\n      }\r\n    },\r\n    computed:{\r\n      noMore () {\r\n        return this.count >= 10\r\n      },\r\n      disabled () {\r\n        return this.loading || this.noMore\r\n      }\r\n    },\r\n    mounted() {\r\n      fetch(\"/ajax/wz/dataAudio\").then(function (e) {\r\n                return e.json()\r\n            }).then((e)=>{\r\n        this.data = e\r\n      }),\r\n        fetch(\"/ajax/wz/dataLength\").then(function (e) {\r\n          return e.json()\r\n        }).then((e)=>{\r\n          this.title = '『文昭談古論今』'\r\n          this.title_son = '华语世界最受欢迎的评论节目之一'\r\n          this.data_len = e['data_len']\r\n        })\r\n    }\r\n  }\r\n</script>\r\n\r\n"]}]}