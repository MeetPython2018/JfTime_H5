{"remainingRequest":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\src\\components\\hotAudio.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\src\\components\\hotAudio.vue","mtime":1586942246587},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cao424519431\\Desktop\\H5_app\\Apps\\JfTime_H5\\Jf_Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\cao424519431\\\\Desktop\\\\H5_app\\\\Apps\\\\JfTime_H5\\\\Jf_Client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport store from \"../store\";\nexport default {\n  name: \"HotAudio\",\n  data: function data() {\n    return {\n      btnStyle: 'el-icon-video-play',\n      active: '',\n      id: '',\n      index: 0,\n      play: 0,\n      audio_menu: '',\n      flag: false,\n      demo: '',\n      // 节目总数\n      hotAudios: [],\n      first_page_hotAudios: [],\n      dataLength: 0,\n      fits: 'fill',\n      data_len: '',\n      dialogVisible: false,\n      count: 0,\n      loading: false\n    };\n  },\n  methods: {\n    //  翻页\n    handleCurrentChange: function handleCurrentChange(val) {\n      var offset = (val - 1) * 5;\n      this.first_page_hotAudios = this.hotAudios.slice(offset, offset + 5);\n    },\n    // 音频控件\n    playAudio: function playAudio(audio_src, audio_name, creator, index) {\n      var demo = this.$store.state.playAudio(audio_src, audio_name, creator, index);\n      this.$emit('load_audio', demo);\n    },\n    message: function message(el) {\n      var _this = this;\n\n      this.$axios.get('/ajax/get_sessions').then(function (res) {\n        console.log(res);\n\n        if (res.data.sessions === 'ok') {\n          var author = el;\n\n          _this.$prompt('To the:' + author, '评论', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            inputType: 'textarea',\n            showClose: true,\n            inputPattern: /^.{1,100}$/,\n            inputErrorMessage: '评论不能为空，或超出一百字'\n          }).then(function (_ref) {\n            var value = _ref.value;\n            var time_stamp = new Date().valueOf();\n            var user = store.state.username;\n\n            _this.$axios({\n              method: 'post',\n              url: '/ajax/comment',\n              headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n              },\n              data: _this.qs.stringify({\n                user: user,\n                comment: value,\n                time_stamp: time_stamp,\n                audio_id: author\n              })\n            }).then(function (res) {\n              if (res.data.status === 'success') {\n                _this.$message({\n                  type: 'success',\n                  message: '评论成功！'\n                });\n              } else {\n                _this.$message({\n                  type: 'waring',\n                  message: '评论失败！'\n                });\n              }\n            });\n          }).catch(function () {\n            _this.$message({\n              type: 'info',\n              message: '取消评论！'\n            });\n          });\n        } else {\n          _this.$message({\n            type: 'waring',\n            message: '请先登录！'\n          });\n        }\n      });\n    },\n    seeMessages: function seeMessages(val) {\n      var _this2 = this;\n\n      this.$axios.get('/ajax/seeMessages', {\n        params: {\n          audio_id: val\n        }\n      }).then(function (res) {\n        if (res.data.length === 0) {\n          _this2.count = 0;\n          _this2.loading = false;\n        } else {\n          _this2.count = res.data;\n          _this2.loading = false;\n        }\n\n        _this2.dialogVisible = true;\n      });\n    },\n    like: function like() {\n      this.$message({\n        message: '收藏节目成功！',\n        type: 'success'\n      });\n    },\n    load: function load() {\n      var _this3 = this;\n\n      this.loading = false;\n      setTimeout(function () {\n        // this.count += 2\n        _this3.loading = false;\n      }, 2000);\n    },\n    // 点击el-image出现的BUG\n    viweImg: function viweImg() {\n      document.body.style = \"\";\n    },\n    function_axios: function function_axios(method, url, set_val) {\n      var _this4 = this;\n\n      this.$axios({\n        method: method,\n        url: url\n      }).then(function (res) {\n        if (set_val === 'all_data') {\n          sessionStorage.setItem('hotAudioData', JSON.stringify(res.data));\n          _this4.first_page_hotAudios = res.data.slice(0, 5);\n          _this4.hotAudios = res.data;\n          _this4.dataLength = res.data.length;\n          _this4.loading = false;\n        } else {\n          _this4.demo_data_len = res.data;\n        }\n      });\n    }\n  },\n  computed: {\n    noMore: function noMore() {\n      return this.count >= 50;\n    },\n    disabled: function disabled() {\n      return this.loading || this.noMore;\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var demo;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // 获取音频\n              this.loading = true;\n\n              if (!sessionStorage.getItem('hotAudioData')) {\n                this.function_axios('get', '/ajax/jftime/hotAudios', 'all_data');\n              } else {\n                this.loading = false;\n                demo = JSON.parse(sessionStorage.getItem('hotAudioData'));\n                this.first_page_hotAudios = demo.slice(0, 5);\n                this.hotAudios = demo;\n                this.dataLength = demo.length;\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};",{"version":3,"sources":["hotAudio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8TA,OAAA,KAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,oBADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,EAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,CAJA;AAKA,MAAA,IAAA,EAAA,CALA;AAMA,MAAA,UAAA,EAAA,EANA;AAOA,MAAA,IAAA,EAAA,KAPA;AAQA,MAAA,IAAA,EAAA,EARA;AASA;AACA,MAAA,SAAA,EAAA,EAVA;AAWA,MAAA,oBAAA,EAAA,EAXA;AAYA,MAAA,UAAA,EAAA,CAZA;AAaA,MAAA,IAAA,EAAA,MAbA;AAcA,MAAA,QAAA,EAAA,EAdA;AAeA,MAAA,aAAA,EAAA,KAfA;AAgBA,MAAA,KAAA,EAAA,CAhBA;AAiBA,MAAA,OAAA,EAAA;AAjBA,KAAA;AAmBA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,mBAFA,+BAEA,GAFA,EAEA;AACA,UAAA,MAAA,GAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA;AACA,WAAA,oBAAA,GAAA,KAAA,SAAA,CAAA,KAAA,CAAA,MAAA,EAAA,MAAA,GAAA,CAAA,CAAA;AACA,KALA;AAMA;AACA,IAAA,SAPA,qBAOA,SAPA,EAOA,UAPA,EAOA,OAPA,EAOA,KAPA,EAOA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA,EAAA,UAAA,EAAA,OAAA,EAAA,KAAA,CAAA;AACA,WAAA,KAAA,CAAA,YAAA,EAAA,IAAA;AACA,KAVA;AAWA,IAAA,OAXA,mBAWA,EAXA,EAWA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,oBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,QAAA,KAAA,IAAA,EAAA;AACA,cAAA,MAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,YAAA,MAAA,EAAA,IAAA,EAAA;AACA,YAAA,iBAAA,EAAA,IADA;AAEA,YAAA,gBAAA,EAAA,IAFA;AAGA,YAAA,SAAA,EAAA,UAHA;AAIA,YAAA,SAAA,EAAA,IAJA;AAKA,YAAA,YAAA,EAAA,YALA;AAMA,YAAA,iBAAA,EAAA;AANA,WAAA,EAOA,IAPA,CAOA,gBAAA;AAAA,gBAAA,KAAA,QAAA,KAAA;AACA,gBAAA,UAAA,GAAA,IAAA,IAAA,EAAA,CAAA,OAAA,EAAA;AACA,gBAAA,IAAA,GAAA,KAAA,CAAA,KAAA,CAAA,QAAA;;AACA,YAAA,KAAA,CAAA,MAAA,CAAA;AACA,cAAA,MAAA,EAAA,MADA;AAEA,cAAA,GAAA,EAAA,eAFA;AAGA,cAAA,OAAA,EAAA;AACA,gCAAA;AADA,eAHA;AAMA,cAAA,IAAA,EAAA,KAAA,CAAA,EAAA,CAAA,SAAA,CAAA;AACA,gBAAA,IAAA,EAAA,IADA;AAEA,gBAAA,OAAA,EAAA,KAFA;AAGA,gBAAA,UAAA,EAAA,UAHA;AAIA,gBAAA,QAAA,EAAA;AAJA,eAAA;AANA,aAAA,EAYA,IAZA,CAYA,UAAA,GAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,MAAA,KAAA,SAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;AAIA,eALA,MAKA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,QADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;AAIA;AACA,aAxBA;AAyBA,WAnCA,EAmCA,KAnCA,CAmCA,YAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA;AACA,cAAA,IAAA,EAAA,MADA;AAEA,cAAA,OAAA,EAAA;AAFA,aAAA;AAIA,WAxCA;AAyCA,SA3CA,MA4CA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,QADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAIA;AACA,OApDA;AAqDA,KAjEA;AAkEA,IAAA,WAlEA,uBAkEA,GAlEA,EAkEA;AAAA;;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,mBAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AACA,UAAA,QAAA,EAAA;AADA;AAAA,OAAA,EAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,SAHA,MAGA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA;;AACA,QAAA,MAAA,CAAA,aAAA,GAAA,IAAA;AACA,OAZA;AAaA,KAhFA;AAiFA,IAAA,IAjFA,kBAiFA;AACA,WAAA,QAAA,CAAA;AACA,QAAA,OAAA,EAAA,SADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AAIA,KAtFA;AAuFA,IAAA,IAvFA,kBAuFA;AAAA;;AACA,WAAA,OAAA,GAAA,KAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA,KA7FA;AA8FA;AACA,IAAA,OA/FA,qBA+FA;AACA,MAAA,QAAA,CAAA,IAAA,CAAA,KAAA,GAAA,EAAA;AACA,KAjGA;AAkGA,IAAA,cAAA,EAAA,wBAAA,MAAA,EAAA,GAAA,EAAA,OAAA,EAAA;AAAA;;AACA,WAAA,MAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA;AAFA,OAAA,EAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,KAAA,UAAA,EAAA;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,cAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,UAAA,MAAA,CAAA,oBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,SANA,MAMA;AACA,UAAA,MAAA,CAAA,aAAA,GAAA,GAAA,CAAA,IAAA;AACA;AACA,OAbA;AAcA;AAjHA,GAvBA;AA0IA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,KAAA,IAAA,EAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,aAAA,KAAA,OAAA,IAAA,KAAA,MAAA;AACA;AANA,GA1IA;AAkJA,EAAA,OAlJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmJA;AACA,mBAAA,OAAA,GAAA,IAAA;;AACA,kBAAA,CAAA,cAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA;AACA,qBAAA,cAAA,CAAA,KAAA,EAAA,wBAAA,EAAA,UAAA;AACA,eAFA,MAEA;AACA,qBAAA,OAAA,GAAA,KAAA;AACA,gBAAA,IAFA,GAEA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAFA;AAGA,qBAAA,oBAAA,GAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACA,qBAAA,SAAA,GAAA,IAAA;AACA,qBAAA,UAAA,GAAA,IAAA,CAAA,MAAA;AACA;;AA7JA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAA","sourcesContent":["/* eslint-disable*/\r\n<template>\r\n  <div id=\"HotAudio\">\r\n    <div class=\"container-full\">\r\n      <el-container>\r\n        <div id=\"center\">\r\n          <el-main >\r\n            <ul class=\"jf_audio\" v-loading=\"loading\">\r\n              <div class=\"divider col-md-12 col-xs-8\">\r\n                <h4>\r\n                  <span>近期热门</span>\r\n                  <i class=\"iconfont icon-hot_icon\"></i>\r\n                </h4>\r\n                <h5>YouTube上面质量最高的时政评论节目之一。</h5>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div class=\"jiemu row\">\r\n                  <div style=\"width: 300px\" class=\"col-xs-6 col-lg-2\" v-for=\"todo in first_page_hotAudios\" :key=\"todo.title\">\r\n                    <el-image :src=\"todo.cover_src\" @click=\"viweImg\">\r\n                      <div slot=\"placeholder\" class=\"image-slot\">\r\n                        加载中<span class=\"dot\">...</span>\r\n                      </div>\r\n                    </el-image>\r\n                    <h4 class=\"title\">\r\n                      {{todo.title}}\r\n                    </h4>\r\n                    <li class=\"audioInfos\">\r\n                      <span>{{todo.upload_date}}</span>\r\n                      <span>{{todo.audio_time}}</span>\r\n                    </li>\r\n                    <li class=\"tools\">\r\n                      <i class=\"iconfont icon-liuyan\" @click=\"message(todo.audio_name)\"></i>\r\n                      <i class=\"iconfont icon-Dialogue\" @click=\"seeMessages(todo.audio_name)\"></i>\r\n                      <i class=\"iconfont icon-xihuan\" @click=\"like\"></i>\r\n                      <i :class=\"index===todo.id ? 'el-icon-video-pause':btnStyle\" @click=\"playAudio(todo.audio_src,todo.audio_name,todo.creator,todo.id)\"></i>\r\n                    </li>\r\n                  </div>\r\n                </div>\r\n                <!--分页-->\r\n                <div class=\"block\">\r\n                  <el-pagination\r\n                    layout=\"prev, pager, next\" :page-size=\"5\" :total=\"dataLength\"\r\n                    @current-change=\"handleCurrentChange\">\r\n                  </el-pagination>\r\n                </div>\r\n                <!--隐藏的评论页-->\r\n                <el-dialog title=\"过往留言\" :visible.sync=\"dialogVisible\">\r\n                  <div class=\"infinite-list-wrapper\" style=\"overflow:auto;height: 18rem\">\r\n                    <ul class=\"list\" v-infinite-scroll=\"load\" infinite-scroll-disabled=\"disabled\">\r\n                      <li v-for=\"i in count\" class=\"list-item\">\r\n                        <div>\r\n                                                  <span><i class=\"iconfont icon-user-outline\"></i> {{i.users}} <i class=\"iconfont icon-zhifeiji\"></i> {{i.audio}}</span>\r\n                                                  <span> <i class=\"iconfont icon-riqi\"></i> {{new Date(parseInt(i.comment_time)).toLocaleString().replace(/:\\d{1,2}$/,' ')}}</span>\r\n                                              </div>\r\n                        <p>\r\n                                                  <i class=\"iconfont icon-huihua\"></i> {{i.content}}\r\n                                              </p>\r\n                      </li>\r\n                    </ul>\r\n                    <p v-if=\"loading\">加载中...</p>\r\n                    <p v-if=\"noMore\">没有更多了</p>\r\n                  </div>\r\n                </el-dialog>\r\n              </div>\r\n            </ul>\r\n          </el-main>\r\n        </div>\r\n      </el-container>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  *{\r\n    padding: 0;\r\n    margin: 0;\r\n    font-family: Helvetica,\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"微软雅黑\",Arial,sans-serif;\r\n  }\r\n  #HotAudio {\r\n    width: 100%;\r\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    text-align: center;\r\n    padding: 0;\r\n    margin: 0;\r\n    background: #f7f7f7;\r\n  }\r\n  .el-container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n  }\r\n  /*音频卡片样式*/\r\n  #center{\r\n    width: 100%;\r\n    background: #f5f5f5!important;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: auto;\r\n  }\r\n  .el-main{\r\n    width: 100%!important;\r\n    max-width: 1260px!important;\r\n    margin: 0 auto;\r\n    padding: 0 1.5rem;\r\n  }\r\n  /*播放面板*/\r\n  .audio_menu{\r\n    position: fixed;\r\n    height: 3.5rem;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    margin: 0 auto;\r\n    width: 15rem;\r\n    border: 0!important;\r\n    z-index: 1200;\r\n  }\r\n  .jf_audio{\r\n    width: 100%;\r\n    height: auto;\r\n    list-style: none;\r\n    margin: 1rem 0;\r\n  }\r\n  .jf_audio .el-divider i{\r\n    margin-left: .5rem;\r\n  }\r\n  .jf_audio .item{\r\n    width: 100%;\r\n    height: auto;\r\n    position: relative;\r\n  }\r\n  .jf_audio .item .jiemu{\r\n    height: auto;\r\n    margin: 0;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n  }\r\n  .jf_audio .item .jiemu .col-lg-2{\r\n    margin-bottom: 1rem;\r\n    margin-right: 1rem;\r\n    display: flex;\r\n    flex-basis: 10rem;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0!important;\r\n  }\r\n  .jf_audio .item .jiemu div{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    position: relative;\r\n    transition: all .5s;\r\n    background: #fff;\r\n  }\r\n  .jf_audio .item .jiemu div:hover{\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1)\r\n  }\r\n  .jf_audio  .item .jiemu div .el-image{\r\n    width: 10rem;\r\n    height: 6rem;\r\n    padding: .5rem!important;\r\n  }\r\n  .title{\r\n    width: 100%;\r\n    height: 3rem;\r\n    text-align: justify;\r\n    font-size: .64rem;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 3;\r\n    line-height: 1rem;\r\n    overflow: hidden;\r\n    padding: 0 .5rem!important;\r\n  }\r\n  .audioInfos{\r\n    width: 100%;\r\n    height: 1.5rem;\r\n    display: flex!important;\r\n    justify-content: space-between!important;\r\n    flex-direction: row!important;\r\n    align-items: center!important;\r\n    padding: .25rem .5rem;\r\n  }\r\n  .audioInfos span{\r\n    font-size: .64rem;\r\n    margin: 0;\r\n    font-family: 楷体;\r\n  }\r\n  .tools{\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 .5rem;\r\n    margin-bottom: .25rem;\r\n  }\r\n  .tools i{\r\n    font-size: 1.1rem;\r\n  }\r\n  .icon-liuyan{\r\n    color: #24ACF2;\r\n  }\r\n  .icon-Dialogue{\r\n    color: #32DD90;\r\n  }\r\n  .icon-xihuan{\r\n    color: #DD4F43;\r\n  }\r\n  @media screen and (max-width: 600px) { /*当屏幕尺寸小于600px时，应用下面的CSS样式*/\r\n    .col-xs-6{\r\n      width: 45%!important;\r\n    }\r\n    .jf_audio .item .jiemu .col-lg-2{\r\n      margin-bottom: 1rem;\r\n      margin-right: 1rem;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0!important;\r\n      }\r\n  }\r\n  .el-menu--horizontal>.el-submenu .el-submenu__title{\r\n    height: 3rem!important;\r\n  }\r\n  .col-xs-6 .el-image{\r\n    width: 100%!important;\r\n    height: 100%;\r\n  }\r\n  .col-xs-6 .title{\r\n    height: 3.8rem;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 3;\r\n    line-height: 1.3rem;\r\n    overflow: hidden;\r\n  }\r\n  /*分页样式*/\r\n  .el-pagination{\r\n    width: 100%;\r\n    height: 50px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n  }\r\n  .el-pager{\r\n    background: #fff;\r\n  }\r\n  .el-pagination li{\r\n    margin: 0!important;\r\n  }\r\n  /*分割线*/\r\n  .divider{\r\n    height: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n    font-size: 1.1rem;\r\n    color: #a06619;\r\n    padding: .64rem 0;\r\n  }\r\n  .divider h4{\r\n    font-size: 1.1rem;\r\n    margin-bottom: .32rem;\r\n  }\r\n  .divider h4 em{\r\n    font-style: normal;\r\n    margin-right: .5rem;\r\n  }\r\n  .divider h5{\r\n    font-size: .64rem;\r\n    margin-right: .5rem;\r\n  }\r\n  .el-image{\r\n    padding: 0!important;\r\n    box-shadow: none!important;\r\n  }\r\n  .el-icon-video-play,.el-icon-video-pause{\r\n    font-size: 1.6em;\r\n    color: #a06619;\r\n  }\r\n  /*查看留言*/\r\n  .el-dialog{\r\n    width: 64%!important;\r\n    height: 16rem!important;\r\n    overflow: hidden!important;\r\n  }\r\n  .list-item{\r\n    width: 89%;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n    height: 3rem;\r\n    margin: .5rem auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  .list-item div{\r\n    width: 89%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin: .2rem 0;\r\n    font-size: .72rem;\r\n  }\r\n  .list-item p{\r\n    width: 89%;\r\n    margin-bottom: .2rem;\r\n    font-size: .72rem;\r\n    text-align: left;\r\n  }\r\n</style>\r\n<script>\r\n  import store from \"../store\";\r\n  export default {\r\n    name: \"HotAudio\",\r\n    data() {\r\n      return {\r\n        btnStyle:'el-icon-video-play',\r\n        active: '',\r\n        id:'',\r\n        index:0,\r\n        play:0,\r\n        audio_menu:'',\r\n        flag: false,\r\n        demo: '',\r\n        // 节目总数\r\n        hotAudios:[],\r\n        first_page_hotAudios:[],\r\n        dataLength:0,\r\n        fits:'fill',\r\n        data_len:'',\r\n        dialogVisible: false,\r\n        count: 0,\r\n        loading: false\r\n      };\r\n    },\r\n    methods:{\r\n      //  翻页\r\n      handleCurrentChange(val){\r\n        var offset = (val-1)*5\r\n        this.first_page_hotAudios = this.hotAudios.slice(offset,offset+5)\r\n      },\r\n      // 音频控件\r\n      playAudio(audio_src,audio_name,creator,index){\r\n        let demo = this.$store.state.playAudio(audio_src,audio_name,creator,index)\r\n        this.$emit('load_audio',demo)\r\n      },\r\n      message(el){\r\n        this.$axios.get('/ajax/get_sessions').then((res => {\r\n          console.log(res)\r\n          if(res.data.sessions === 'ok'){\r\n            var author= el\r\n            this.$prompt('To the:'+author,'评论' ,{\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              inputType:'textarea',\r\n              showClose:true,\r\n              inputPattern: /^.{1,100}$/,\r\n              inputErrorMessage: '评论不能为空，或超出一百字'\r\n            }).then(({ value }) => {\r\n              var time_stamp = (new Date()).valueOf()\r\n              var user = store.state.username\r\n              this.$axios({\r\n                method:'post',\r\n                url:'/ajax/comment',\r\n                headers:{\r\n                  'Content-Type': 'application/x-www-form-urlencoded',\r\n                },\r\n                data:this.qs.stringify({\r\n                  user:user,\r\n                  comment:value,\r\n                  time_stamp:time_stamp,\r\n                  audio_id:author\r\n                })\r\n              }).then((res)=>{\r\n                if(res.data.status==='success'){\r\n                  this.$message({\r\n                    type: 'success',\r\n                    message: '评论成功！'\r\n                  });\r\n                }else {\r\n                  this.$message({\r\n                    type: 'waring',\r\n                    message: '评论失败！'\r\n                  });\r\n                }\r\n              })\r\n            }).catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '取消评论！'\r\n              });\r\n            });\r\n          }\r\n          else{\r\n            this.$message({\r\n              type: 'waring',\r\n              message: '请先登录！'\r\n            });\r\n          }\r\n        }))\r\n      },\r\n      seeMessages(val){\r\n        this.$axios.get('/ajax/seeMessages',{params:{\r\n            audio_id:val\r\n          }\r\n        }).then((res)=>{\r\n          if(res.data.length===0){\r\n            this.count=0\r\n            this.loading = false\r\n          }else{\r\n            this.count = res.data\r\n            this.loading = false\r\n          }\r\n          this.dialogVisible = true\r\n        })\r\n      },\r\n      like(){\r\n        this.$message({\r\n          message: '收藏节目成功！',\r\n          type: 'success'\r\n        });\r\n      },\r\n      load () {\r\n        this.loading = false\r\n        setTimeout(() => {\r\n          // this.count += 2\r\n          this.loading = false\r\n        }, 2000)\r\n      },\r\n      // 点击el-image出现的BUG\r\n      viweImg(){\r\n\t      document.body.style = \"\";\r\n      },\r\n      function_axios:function (method,url,set_val) {\r\n        this.$axios({\r\n          method:method,\r\n          url:url,\r\n        }).then((res=>{\r\n          if(set_val==='all_data'){\r\n            sessionStorage.setItem('hotAudioData',JSON.stringify(res.data))\r\n            this.first_page_hotAudios = res.data.slice(0,5)\r\n            this.hotAudios = res.data\r\n            this.dataLength = res.data.length\r\n            this.loading = false\r\n          }else {\r\n            this.demo_data_len = res.data\r\n          }\r\n        }))\r\n      }\r\n    },\r\n    computed: {\r\n      noMore () {\r\n        return this.count >= 50\r\n      },\r\n      disabled () {\r\n        return this.loading || this.noMore\r\n      }\r\n    },\r\n    async mounted() {\r\n      // 获取音频\r\n      this.loading = true\r\n      if(!sessionStorage.getItem('hotAudioData')){\r\n        this.function_axios('get','/ajax/jftime/hotAudios','all_data')\r\n      }else {\r\n        this.loading = false\r\n        let demo = JSON.parse(sessionStorage.getItem('hotAudioData'))\r\n        this.first_page_hotAudios = demo.slice(0,5)\r\n        this.hotAudios = demo\r\n        this.dataLength = demo.length\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n"],"sourceRoot":"src/components"}]}